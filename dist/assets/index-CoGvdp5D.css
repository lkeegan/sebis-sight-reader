:root{color-scheme:light;--ink: #1c1b1f;--muted: #6a6673;--paper: #f8f4ec;--accent: #f36b4b;--accent-strong: #ef3d16;--good: #2fbf71;--bad: #f05a5a;--glow: rgba(243, 107, 75, .28);--panel: rgba(255, 255, 255, .78);--shadow: 0 22px 60px rgba(26, 24, 31, .15);--font-display: "Merienda", "Comic Sans MS", "Trebuchet MS", cursive;--font-body: "DM Sans", "Segoe UI", sans-serif}*{box-sizing:border-box}html,body{height:100%;overflow:hidden}body{margin:0;font-family:var(--font-body);color:var(--ink);font-size:clamp(16px,1.2vw,20px);background:radial-gradient(circle at top left,rgba(255,214,157,.7),transparent 45%),radial-gradient(circle at 20% 70%,rgba(151,210,255,.35),transparent 55%),linear-gradient(160deg,#fff7e9,#f7efe2,#f2f6ff)}.app{width:100%;max-width:none;margin:0 auto;padding:clamp(16px,3vw,36px) clamp(14px,2.5vw,32px) clamp(18px,3.5vw,42px);display:grid;gap:clamp(22px,3vw,40px);height:100vh;grid-template-rows:auto 1fr;min-height:0}.hero{display:grid;gap:clamp(18px,2.6vw,32px);align-items:center;padding:clamp(14px,2.2vw,26px);background:var(--panel);border-radius:28px;box-shadow:var(--shadow);-webkit-backdrop-filter:blur(16px);backdrop-filter:blur(16px)}.controls{display:grid;grid-template-columns:repeat(auto-fit,minmax(110px,1fr));gap:clamp(10px,1.6vw,18px);align-items:center;justify-items:start}.controls.hidden{display:none}.controls.clef-only{grid-template-columns:1fr;justify-items:center;align-content:center;min-height:70vh}.clef-toggle{display:grid;grid-template-columns:repeat(2,minmax(110px,1fr));gap:clamp(10px,1.6vw,16px);grid-column:1 / -1}.signature-toggle,.level-toggle{display:grid;grid-template-columns:1fr;gap:16px;grid-column:1 / -1}.controls .flow-step{display:none}.controls .flow-step.active{display:grid}.flow-step.clef-step,.flow-step.key-step,.flow-step.level-step{place-items:center;text-align:center;gap:18px}.flow-title{font-size:clamp(1.8rem,4vw,3rem);font-weight:700}.app-title{font-size:clamp(2rem,4.8vw,3.6rem);font-weight:800;letter-spacing:.02em}.flow-image{width:clamp(180px,38vw,420px);height:auto;display:block;border-radius:20px;box-shadow:0 16px 30px #0000002e}.note-mode-toggle .sig-btn{font-size:clamp(.83rem,1.8vw,1.2rem)}.clef-toggle,.signature-toggle,.level-toggle{justify-items:center}.signature-buttons{display:grid;grid-template-columns:repeat(5,minmax(126px,1fr));gap:clamp(10px,1.6vw,16px);justify-items:center}.level-buttons{display:grid;grid-template-columns:repeat(3,minmax(126px,1fr));gap:clamp(10px,1.6vw,16px);justify-items:center}.clef-btn{background:#fff;border:2px solid rgba(28,27,31,.15);border-radius:18px;width:clamp(126px,18vw,180px);height:clamp(63px,9vw,90px);font-size:clamp(1.65rem,3.6vw,2.7rem);font-weight:700;color:var(--ink);box-shadow:0 12px 24px #1b182414;display:flex;align-items:center;justify-content:center;line-height:1}#clef-bass{transform:translateY(2px)}.clef-btn.active{border-color:var(--accent);box-shadow:0 12px 24px #f36b4b40}.sig-btn{background:#fff;border:2px solid rgba(28,27,31,.15);border-radius:18px;width:clamp(126px,18vw,180px);height:clamp(63px,9vw,90px);font-size:clamp(1.35rem,3vw,2.1rem);font-weight:700;color:var(--ink);box-shadow:0 10px 20px #1b182414;line-height:1}.sig-btn.active{border-color:var(--accent);box-shadow:0 12px 24px #f36b4b40}.sig-icon{display:inline-block}.sig-natural{transform:translateY(-10px) scale(1.3)}.sig-stack{position:relative;display:flex;align-items:center;justify-content:center;width:100%;height:100%;overflow:hidden;transform:translate(-.8em)}.sig-stack.sharp{font-size:clamp(1.8rem,3.6vw,2.7rem);transform:translate(-.4em) scale(1)}.sig-stack.flat{font-size:clamp(1.95rem,3.9vw,2.85rem);transform:translate(-.5em) scale(1)}.sig-mark{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) translate(var(--x),var(--y));line-height:1}button{border:none;border-radius:18px;width:clamp(126px,18vw,180px);height:clamp(63px,9vw,90px);padding:0;font-size:clamp(.72rem,1.35vw,.9rem);font-weight:600;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease}button:focus-visible{outline:3px solid rgba(243,107,75,.4);outline-offset:2px}button.primary{background:linear-gradient(135deg,var(--accent) 0%,var(--accent-strong) 100%);color:#fff;box-shadow:0 12px 30px var(--glow)}button.primary:hover{transform:translateY(-1px)}button.ghost{background:#fff;color:var(--ink);box-shadow:0 10px 22px #1b182414}.status{font-size:.95rem;color:var(--muted);grid-column:1 / -1}.stage{display:flex;flex-direction:column;gap:clamp(14px,2vw,22px);padding:clamp(16px,2.4vw,28px);border-radius:28px;background:#ffffffe0;box-shadow:var(--shadow);position:relative;flex:1;min-height:0}.session-bar{display:grid;grid-template-columns:1fr auto;gap:18px;align-items:center;padding:clamp(14px,2vw,22px);border-radius:22px;background:#ffffffe6;box-shadow:var(--shadow)}.progress-wrap{display:grid;gap:8px}.progress-label{font-weight:700}.progress-track{height:12px;border-radius:999px;background:#1c1b1f1a;overflow:hidden}.progress-fill{height:100%;width:0%;background:linear-gradient(90deg,#2fbf71,#f36b4b);transition:width .2s ease}.hidden{display:none!important}canvas{width:100%;flex:1;height:100%;border-radius:18px;background:linear-gradient(180deg,#fffaf0,#fff4e1);border:1px solid rgba(0,0,0,.05);min-height:0;display:block}.celebration{position:absolute;top:clamp(12px,2vw,22px);right:clamp(14px,2.4vw,26px);padding:clamp(8px,1.4vw,14px) clamp(14px,2vw,22px);border-radius:999px;background:#2fbf7126;color:#1c1b1f;font-weight:700;opacity:0;transform:translateY(-8px) scale(.98);transition:opacity .2s ease,transform .2s ease;pointer-events:none}.celebration.show{opacity:1;transform:translateY(0) scale(1)}.end-overlay{position:fixed;top:0;right:0;bottom:0;left:0;display:none;place-items:center;background:#ffffffeb;z-index:45;overflow:hidden}.end-overlay.show{display:grid}.end-content{position:relative;z-index:2;display:grid;gap:18px;text-align:center}.end-actions{display:grid;gap:18px;justify-items:center}.end-monkey{width:clamp(220px,42vw,520px);filter:drop-shadow(0 18px 22px rgba(0,0,0,.25));animation:monkey-bounce 3s ease-in-out}.end-monkey img{width:100%;height:auto;display:block}#confetti-canvas{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;z-index:0;pointer-events:none}.end-text{font-size:clamp(2rem,6vw,4rem);font-weight:800}.end-overlay .primary{opacity:0;transform:translateY(10px);transition:opacity .3s ease,transform .3s ease}.end-overlay .primary.show{opacity:1;transform:translateY(0)}@keyframes monkey-bounce{0%{transform:translateY(60px) scale(.8)}30%{transform:translateY(-40px) scale(1)}60%{transform:translateY(10px) scale(1.05)}to{transform:translateY(60px) scale(.9)}}@media (max-width: 900px){.controls{justify-items:stretch}button{width:100%}}
